Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _react=require('react');var _react2=_interopRequireDefault(_react);var _Base=require('./utils/Base64');var _Base2=_interopRequireDefault(_Base);var _Utils=require('./utils/Utils');var _Utils2=_interopRequireDefault(_Utils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var API_VERSION='v1';exports.default={request:function request(url){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var callback=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var opt,response,responseJson;return regeneratorRuntime.async(function request$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;opt=_extends({headers:{'Accept':'application/json','Content-Type':'application/json'}},options);_context.next=4;return regeneratorRuntime.awrap(fetch(url,opt));case 4:response=_context.sent;_context.next=7;return regeneratorRuntime.awrap(response.json());case 7:responseJson=_context.sent;if(!(typeof callback==='function')){_context.next=10;break;}return _context.abrupt('return',callback({responseJson:responseJson}));case 10:return _context.abrupt('return',responseJson);case 13:_context.prev=13;_context.t0=_context['catch'](0);console.log(_context.t0);if(!(typeof callback==='function')){_context.next=18;break;}return _context.abrupt('return',callback(null));case 18:return _context.abrupt('return',null);case 19:case'end':return _context.stop();}}},null,this,[[0,13]]);},getAllConfig:function getAllConfig(api,appId,entityId,playerId,callback){var allConfig,res;return regeneratorRuntime.async(function getAllConfig$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return regeneratorRuntime.awrap(Promise.all([this.getAdsConfig(api,appId,entityId),this.getEntityInfo(api,appId,entityId),this.getLinkPlayPublish(api,appId,entityId),this.getPlayerConfig(api,appId,playerId)]));case 2:allConfig=_context2.sent;res={ads:allConfig[0],entity:allConfig[1],linkPlay:allConfig[2],player:allConfig[3]};if(!(typeof callback==='function')){_context2.next=6;break;}return _context2.abrupt('return',callback(res));case 6:return _context2.abrupt('return',res);case 7:case'end':return _context2.stop();}}},null,this);},getAdsConfig:function getAdsConfig(api,appId,entityId,callback){var url=parseAPIUrl(api)+'/public/'+API_VERSION+'/ads/cue-point/'+entityId+'/info';return this.request(url,{},callback);},getEntityInfo:function getEntityInfo(api,appId,entityId,callback){var url=parseAPIUrl(api)+'/public/'+API_VERSION+'/media/entity/info/'+entityId;return this.request(url,{},callback);},getLinkPlayPublish:function getLinkPlayPublish(api,appId,entityId,callback){var url=parseAPIUrl(api)+'/public/v2/media/entity/get-link-play?appId='+appId+'&entityId='+entityId;return this.request(url,{},callback);},getPlayerConfig:function getPlayerConfig(api,appId,playerId,callback){var url=parseAPIUrl(api)+'/public/'+API_VERSION+'/player/info/'+playerId;return this.request(url,{},callback);}};var parseAPIUrl=function parseAPIUrl(api){var url=_Base2.default.atob(api);return _Utils2.default.urlToHttps(url);};
//# sourceMappingURL=API.js.map