{"version":3,"sources":["../../src/UZPlayer.js"],"names":["UZPlayer","props","debug","Logger","enableDebug","NetInfo","getConnectionInfo","then","connectionInfo","type","effectiveType","addEventListener","handleConnectivityChange","initTime","Date","now","self","size","Dimensions","get","state","playbackStatus","fullsceenState","FullscreenState","EXIT","fullscreenWidth","width","height","fullscreenHeight","player","VERSION","container","Promise","resolve","Constants","getWebViewUserAgentAsync","res","userAgent","deviceId","sessionId","didJustFinish","inited","listener","onError","evt","onFullscreenUpdate","onFullscreenChange","skin","updateState","fullscreen","ENTER","onLoad","onLoaded","onLoadStart","onPlaybackStatusUpdate","show","isPlaying","onPlaybackChange","pluginManager","updatePlaybackStatus","onReadyForDisplay","PluginManager","errorMessage","lastNetworkStatus","isFirstConnect","entityDetail","liveDetail","stream","API","getEntityDetail","api","token","entityId","getLiveDetail","feedId","getLiveView","getPlaybackToken","appId","playbackToken","cdnListFull","cdnList","getCDNVod","env","getCDNLive","streamName","region","data","cdn","all","cdns","map","push","host","updateLiveStatusProps","message","init","updateEntityProps","ENTERING","exitFullscreen","enterFullscreen","e","StatusBar","setHidden","setState","ScreenOrientation","allow","Orientation","LANDSCAPE","EXITING","ALL","pause","play","video","pauseAsync","position","emit","playAsync","playFromPositionAsync","positionMillis","setPositionAsync","durationMillis","forceSeek","height169","Math","floor","view","styles","zIndex","top","left","component","Expo","Video","RESIZE_MODE_CONTAIN","onReady","url","definedLinkPlayVod","definedLinkPlayLive","indexOf","getLiveStatusDetail","liveStatusDetail","lastProcess","loadAsync","uri","setStatusAsync","isLooping","shouldPlay","hide","readyTime","pageLoadTime","prefix","Platform","OS","parseInt","Version","playerName","PlayerEvent","React","Component","onMutePressed","setIsMutedAsync","isMuted","retrieveLiveConnection","StyleSheet","create","backgroundColor"],"mappings":"k3BAAA,4B,2CACA,yCACA,0BACA,oC,2CAEA,0B,uCACA,2C,6CACA,sD,2DACA,8B,2CACA,oC,o4BAGqBA,S,+EACnB,kBAAYC,KAAZ,CAAmB,gCACjB,GAAI,CAAC,CAACA,MAAMC,KAAZ,CAAmB,CACjBC,cAAOC,WAAP,CAAqB,IAArB,CACD,CAHgB,0GAIXH,KAJW,gCAOjBI,qBAAQC,iBAAR,GAA4BC,IAA5B,CAAiC,SAACC,cAAD,CAAoB,CACjDL,cAAOD,KAAP,CAAa,kBAAoBM,eAAeC,IAAnC,CAA0C,mBAA1C,CAAmED,eAAeE,aAA/F,EACH,CAFD,EAGAL,qBAAQM,gBAAR,CACI,kBADJ,CAEI,MAAKC,wBAFT,EAIA,MAAKC,QAAL,CAAgBC,KAAKC,GAAL,EAAhB,CAEA,GAAIC,WAAJ,CAEA,GAAMC,MAAOC,wBAAWC,GAAX,CAAe,QAAf,CAAb,CAEA,MAAKC,KAAL,CAAa,CACXC,eAAgB,EADL,CAEXC,eAAgBC,uBAAgBC,IAFrB,CAGXC,gBAAiBR,KAAKS,KAAL,CAAaT,KAAKU,MAAlB,CAA2BV,KAAKS,KAAhC,CAAwCT,KAAKU,MAHnD,CAIXC,iBAAkBX,KAAKU,MAAL,CAAcV,KAAKS,KAAnB,CAA2BT,KAAKU,MAAhC,CAAyCV,KAAKS,KAJrD,CAAb,CAOA,MAAKG,MAAL,CAAc,CACZC,QAAS,OADG,CAAd,CAGA,MAAKC,SAAL,CAAiB,EAAjB,CAEAC,QAAQC,OAAR,CAAgBC,gBAAUC,wBAAV,EAAhB,EAAsD5B,IAAtD,CAA2D,SAAS6B,GAAT,CAAc,CACvEpB,KAAKa,MAAL,CAAYQ,SAAZ,CAAwBD,GAAxB,CACD,CAFD,EAGA,MAAKP,MAAL,CAAYS,QAAZ,CAAuBJ,gBAAUI,QAAjC,CACA,MAAKT,MAAL,CAAYU,SAAZ,CAAwBL,gBAAUK,SAAlC,CACA,MAAKV,MAAL,CAAYW,aAAZ,CAA4B,KAA5B,CACA,MAAKX,MAAL,CAAYY,MAAZ,CAAqB,KAArB,CACA,MAAKZ,MAAL,CAAY5B,KAAZ,CAAoBA,KAApB,CAEA,MAAK4B,MAAL,CAAYa,QAAZ,CAAuB,CACrBC,QAAS,iBAASC,GAAT,CAAc,CACrBzC,cAAOD,KAAP,CAAa,SAAb,EACA,GAAIc,KAAKa,MAAL,CAAY5B,KAAZ,EAAqBe,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAvC,EAAmD,MAAO1B,MAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2BC,OAAlC,GAA8C,UAArG,CAAiH,CAC/G3B,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2BC,OAA3B,CAAmCC,GAAnC,EACD,CACF,CANoB,CAOrBC,mBAAoB,4BAASD,GAAT,CAAc,CAChCzC,cAAOD,KAAP,CAAa,oBAAb,EAeA,GAAIc,KAAKa,MAAL,CAAY5B,KAAZ,EAAqBe,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAvC,EAAmD,MAAO1B,MAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2BI,kBAAlC,GAAyD,UAAhH,CAA4H,CAC1H9B,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2BI,kBAA3B,CAA8CF,GAA9C,EACD,CAED5B,KAAK+B,IAAL,CAAUC,WAAV,CAAsB,CAAEC,WAAYL,MAAQrB,uBAAgB2B,KAAtC,CAAtB,EACD,CA5BoB,CA6BrBC,OAAQ,gBAASP,GAAT,CAAc,CACpBzC,cAAOD,KAAP,CAAa,QAAb,EAEA,GAAIc,KAAKa,MAAL,CAAY5B,KAAZ,EAAqBe,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAvC,EAAmD,MAAO1B,MAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2BU,QAAlC,GAA+C,UAAtG,CAAkH,CAChHpC,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2BU,QAA3B,CAAoCR,GAApC,EACD,CACF,CAnCoB,CAoCrBS,YAAa,qBAAST,GAAT,CAAc,CACzBzC,cAAOD,KAAP,CAAa,aAAb,EAEA,GAAIc,KAAKa,MAAL,CAAY5B,KAAZ,EAAqBe,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAvC,EAAmD,MAAO1B,MAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2BS,MAAlC,GAA6C,UAApG,CAAgH,CAC9GnC,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2BS,MAA3B,CAAkCP,GAAlC,EACD,CACF,CA1CoB,CA2CrBU,uBAAwB,gCAASV,GAAT,CAAc,CACpCzC,cAAOD,KAAP,CAAa,wBAAb,EACAc,KAAKI,KAAL,CAAWC,cAAX,CAA4BuB,GAA5B,CACA,GAAI5B,KAAKI,KAAL,CAAWC,cAAX,CAA0BmB,aAA9B,CAA6C,CAC3CxB,KAAKa,MAAL,CAAYW,aAAZ,CAA4B,IAA5B,CACAxB,KAAK+B,IAAL,CAAUQ,IAAV,GACD,CAHD,IAGO,IAAIvC,KAAKI,KAAL,CAAWC,cAAX,CAA0BmC,SAA9B,CAAyC,CAC9CxC,KAAKa,MAAL,CAAYW,aAAZ,CAA4B,KAA5B,CACD,CACD,GAAIxB,KAAKa,MAAL,CAAY5B,KAAZ,EAAqBe,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAvC,EAAmD,MAAO1B,MAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2Be,gBAAlC,GAAuD,UAA9G,CAA0H,CACxHzC,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2Be,gBAA3B,CAA4Cb,GAA5C,EACD,CACD5B,KAAK+B,IAAL,CAAUC,WAAV,CAAsB,CAAE3B,eAAgBL,KAAKI,KAAL,CAAWC,cAA7B,CAAtB,EACAL,KAAK0C,aAAL,CAAmBC,oBAAnB,CAAwC3C,KAAKI,KAAL,CAAWC,cAAnD,EACD,CAzDoB,CA0DrBuC,kBAAmB,2BAAShB,GAAT,CAAc,CAC/BzC,cAAOD,KAAP,CAAa,mBAAb,EACD,CA5DoB,CAAvB,CA+DA,MAAKwD,aAAL,CAAqB,GAAIG,wBAAJ,CAAkB,MAAKhC,MAAL,CAAY5B,KAA9B,CAArB,CAEA,MAAK6D,YAAL,CAAoB,IAApB,CACA,MAAKC,iBAAL,CAAyB,IAAzB,CACA,MAAKC,cAAL,CAAsB,IAAtB,CA5GiB,aA6GlB,C,8LAOC,KAAKC,YAAL,CAAoB,IAApB,CACA,KAAKC,UAAL,CAAkB,IAAlB,C,KACI,KAAKrC,MAAL,CAAY5B,KAAZ,CAAkBkE,MAAlB,GAA6B,K,0EACLC,cAAIC,eAAJ,CAAoB,KAAKxC,MAAL,CAAY5B,KAAZ,CAAkBqE,GAAtC,CAA2C,KAAKzC,MAAL,CAAY5B,KAAZ,CAAkBsE,KAA7D,CAAoE,KAAK1C,MAAL,CAAY5B,KAAZ,CAAkBuE,QAAtF,C,SAA1B,KAAKP,Y,kDACG,KAAKpC,MAAL,CAAY5B,KAAZ,CAAkBkE,MAAlB,GAA6B,M,4EACTC,cAAIK,aAAJ,CAAkB,KAAK5C,MAAL,CAAY5B,KAAZ,CAAkBqE,GAApC,CAAyC,KAAKzC,MAAL,CAAY5B,KAAZ,CAAkBsE,KAA3D,CAAkE,KAAK1C,MAAL,CAAY5B,KAAZ,CAAkBuE,QAApF,CAA6F,KAAK3C,MAAL,CAAY5B,KAAZ,CAAkByE,MAA/G,CAAuH,IAAvH,C,UAA1B,KAAKT,Y,gEACiBG,cAAIO,WAAJ,CAAgB,KAAK9C,MAAL,CAAY5B,KAAZ,CAAkBqE,GAAlC,CAAuC,KAAKzC,MAAL,CAAY5B,KAAZ,CAAkBsE,KAAzD,CAAgE,KAAK1C,MAAL,CAAY5B,KAAZ,CAAkBuE,QAAlF,CAA4F,IAA5F,C,UAAxB,KAAKN,U,wEAG2BE,cAAIQ,gBAAJ,CAAqB,KAAK/C,MAAL,CAAY5B,KAAZ,CAAkBqE,GAAvC,CAA4C,KAAKzC,MAAL,CAAY5B,KAAZ,CAAkB4E,KAA9D,CAAqE,KAAKhD,MAAL,CAAY5B,KAAZ,CAAkBuE,QAAvF,C,UAAlC,KAAK3C,MAAL,CAAYiD,a,eAEZ,KAAKjD,MAAL,CAAYkD,WAAZ,CAA0B,EAA1B,CACA,KAAKlD,MAAL,CAAYmD,OAAZ,CAAsB,EAAtB,CAEI5C,G,CAAM,I,MACN,KAAKP,MAAL,CAAY5B,KAAZ,CAAkBkE,MAAlB,GAA6B,K,4EACnBC,cAAIa,SAAJ,CAAc,KAAKpD,MAAL,CAAY5B,KAAZ,CAAkBiF,GAAhC,CAAqC,KAAKrD,MAAL,CAAYiD,aAAjD,CACV,KAAKjD,MAAL,CAAY5B,KAAZ,CAAkB4E,KADR,CACe,KAAKhD,MAAL,CAAY5B,KAAZ,CAAkBuE,QADjC,C,UAAZpC,G,mDAES,KAAKP,MAAL,CAAY5B,KAAZ,CAAkBkE,MAAlB,GAA6B,M,4EAC1BC,cAAIe,UAAJ,CAAe,KAAKtD,MAAL,CAAY5B,KAAZ,CAAkBiF,GAAjC,CAAsC,KAAKrD,MAAL,CAAYiD,aAAlD,CACV,KAAKjD,MAAL,CAAY5B,KAAZ,CAAkB4E,KADR,CACe,KAAKhD,MAAL,CAAY5B,KAAZ,CAAkBuE,QADjC,CAEV,KAAK3C,MAAL,CAAY5B,KAAZ,CAAkBmF,UAFR,CAEoB,KAAKvD,MAAL,CAAY5B,KAAZ,CAAkBoF,MAFtC,C,UAAZjD,G,4BAKEA,KAAOA,IAAIkD,IAAX,EAAmBlD,IAAIkD,IAAJ,CAASC,G,2BAC9B,KAAK1D,MAAL,CAAYkD,WAAZ,CAA0B3C,IAAIkD,IAAJ,CAASC,GAAnC,CACA,KAAK1D,MAAL,CAAYmD,OAAZ,CAAsB,EAAtB,C,iDACMhD,QACHwD,GADG,CACCpD,IAAIkD,IAAJ,CAASC,GADV,EAEHhF,IAFG,CAEE,cAAQ,CACZ,MAAOkF,MAAKC,GAAL,CAAS,aAAO,CACrB,OAAK7D,MAAL,CAAYmD,OAAZ,CAAoBW,IAApB,CAAyBJ,IAAIK,IAA7B,EACD,CAFM,CAAP,CAGD,CANG,C,yCASNzF,cAAOD,KAAP,CAAa,YAAb,CAA2BkC,GAA3B,EACA,KAAKW,IAAL,CAAU8C,qBAAV,CAAgCzD,IAAI0D,OAApC,E,yCAGF,KAAKpC,aAAL,CAAmBqC,IAAnB,CAAwB,KAAKlE,MAA7B,CAAqC,CACnCmD,QAAS,KAAKnD,MAAL,CAAYmD,OADc,CAEnCf,aAAc,KAAKA,YAFgB,CAArC,EAIA,KAAKlB,IAAL,CAAUiD,iBAAV,CAA4B,CAAE/B,aAAc,KAAKA,YAArB,CAA5B,EAEA,KAAKpC,MAAL,CAAYY,MAAZ,CAAqB,IAArB,C,gCAEO,KAAKZ,MAAL,CAAYY,M,sHAOF,CACjBtC,cAAOD,KAAP,CAAa,oBAAb,CAAmC,KAAKkB,KAAL,CAAWE,cAA9C,EACA,GAAI,CACF,GAAI,KAAKF,KAAL,CAAWE,cAAX,GAA8BC,uBAAgB2B,KAA9C,EAAuD,KAAK9B,KAAL,CAAWE,cAAX,GAA8BC,uBAAgB0E,QAAzG,CAAmH,CACjH,KAAKC,cAAL,GACA,KAAKrE,MAAL,CAAYa,QAAZ,CAAqBG,kBAArB,CAAwCtB,uBAAgBC,IAAxD,EACD,CAHD,IAGO,CACL,KAAK2E,eAAL,GACA,KAAKtE,MAAL,CAAYa,QAAZ,CAAqBG,kBAArB,CAAwCtB,uBAAgB2B,KAAxD,EACD,CACF,CAAC,MAAMkD,CAAN,CAAS,CAAE,CACd,C,yDAEiB,CAChB,GAAI,CAEF,KAAKhF,KAAL,CAAWE,cAAX,CAA4BC,uBAAgB0E,QAA5C,CACAI,uBAAUC,SAAV,CAAoB,IAApB,EACA,KAAKlF,KAAL,CAAWE,cAAX,CAA4BC,uBAAgB2B,KAA5C,CAEA,KAAKqD,QAAL,CAAc,uBAAiB,CAC7B,MAAO,CAAEjF,eAAgBC,uBAAgB2B,KAAlC,CAAP,CACD,CAFD,EAGAsD,wBAAkBC,KAAlB,CAAwBD,wBAAkBE,WAAlB,CAA8BC,SAAtD,EACD,CAAC,MAAMP,CAAN,CAAS,CAAE,CACd,C,uDAEgB,CACf,GAAI,CAEF,KAAKhF,KAAL,CAAWE,cAAX,CAA4BC,uBAAgBqF,OAA5C,CACAP,uBAAUC,SAAV,CAAoB,KAApB,EACA,KAAKlF,KAAL,CAAWE,cAAX,CAA4BC,uBAAgBC,IAA5C,CAEA,KAAK+E,QAAL,CAAc,uBAAiB,CAC7B,MAAO,CAAEjF,eAAgBC,uBAAgBC,IAAlC,CAAP,CACD,CAFD,EAGAgF,wBAAkBC,KAAlB,CAAwBD,wBAAkBE,WAAlB,CAA8BG,GAAtD,EACD,CAAC,MAAMT,CAAN,CAAS,CAAE,CACd,C,yDAEiB,CAChB,GAAI,CACF,GAAI,KAAKhF,KAAL,CAAWC,cAAX,CAA0BmC,SAA9B,CAAyC,CACvC,KAAKsD,KAAL,GACD,CAFD,IAEO,CACL,KAAKC,IAAL,GACD,CACF,CAAC,MAAMX,CAAN,CAAS,CAAE,CACd,C,qCAEO,CACN,GAAI,CACFjG,cAAOD,KAAP,CAAa,iCAAb,CAA+C,KAAK2B,MAAL,CAAYW,aAA3D,EACA,KAAKX,MAAL,CAAYmF,KAAZ,CAAkBC,UAAlB,GACA,KAAKlE,IAAL,CAAUQ,IAAV,GACD,CAAC,MAAO6C,CAAP,CAAU,CAAG,CAChB,C,kCAGIc,Q,CAAU,CACb,GAAI,CACF/G,cAAOD,KAAP,CAAa,sCAAb,CAAoD,KAAK2B,MAAL,CAAYW,aAAhE,EAEA,GAAI,KAAKX,MAAL,CAAYW,aAAhB,CAA+B,CAC7B,KAAKX,MAAL,CAAYW,aAAZ,CAA4B,KAA5B,CACA,KAAKkB,aAAL,CAAmByD,IAAnB,CAAwB,QAAxB,EACD,CACD,GAAI,MAAOD,SAAP,GAAoB,WAAxB,CAAqC,CACnC,KAAKrF,MAAL,CAAYmF,KAAZ,CAAkBI,SAAlB,GACD,CAFD,IAEO,CACL,KAAKvF,MAAL,CAAYmF,KAAZ,CAAkBK,qBAAlB,CAAwCH,SAAW,IAAnD,EACD,CACD,KAAKnE,IAAL,CAAUQ,IAAV,GACApD,cAAOD,KAAP,CAAa,6CAAb,EACD,CAAC,MAAOkG,CAAP,CAAU,CAAG,CAChB,C,0CAGQc,Q,CAAU,CACjB,GAAI,CACF,GAAI,KAAK9F,KAAL,CAAWC,cAAf,CAA+B,CAC7B,GAAIiG,gBAAiBJ,SAAW,IAAhC,CACAI,eAAiB,KAAKlG,KAAL,CAAWC,cAAX,CAA0BiG,cAA1B,CAA2CA,cAA5D,CACA,GAAIA,eAAiB,CAArB,CAAwB,CACtBA,eAAiB,CAAjB,CACD,CACD,KAAKzF,MAAL,CAAYmF,KAAZ,CAAkBO,gBAAlB,CAAmCD,cAAnC,EACD,CACF,CAAC,MAAOlB,CAAP,CAAU,CAAG,CAChB,C,wCAGOc,Q,CAAU,CAChB,GAAI,CACF,GAAI,KAAK9F,KAAL,CAAWC,cAAf,CAA+B,CAC7B,GAAIiG,gBAAiBJ,SAAW,IAAhC,CACAI,eAAiB,KAAKlG,KAAL,CAAWC,cAAX,CAA0BiG,cAA1B,CAA2CA,cAA5D,CACA,GAAIA,eAAiB,KAAKlG,KAAL,CAAWC,cAAX,CAA0BmG,cAA1B,CAA2C,GAAhE,CAAqE,CACnEF,eAAiB,KAAKlG,KAAL,CAAWC,cAAX,CAA0BmG,cAA1B,CAA2C,GAA5D,CACD,CACD,KAAK3F,MAAL,CAAYmF,KAAZ,CAAkBO,gBAAlB,CAAmCD,cAAnC,EACD,CACF,CAAC,MAAOlB,CAAP,CAAU,CAAG,CAChB,C,kCAEIc,Q,CAA6B,IAAnBO,UAAmB,2DAAP,KAAO,CAChC,GAAI,CACF,GAAIH,gBAAiBJ,SAAW,IAAhC,CACA,GAAI,CAACO,SAAD,EAAcH,eAAiB,KAAKlG,KAAL,CAAWC,cAAX,CAA0BmG,cAA1B,CAA2C,IAA9E,CAAoF,CAClFF,eAAiB,KAAKlG,KAAL,CAAWC,cAAX,CAA0BmG,cAA1B,CAA2C,IAA5D,CACD,CACD,GAAIF,eAAiB,CAArB,CAAwB,CACtBA,eAAiB,CAAjB,CACD,CACD,KAAKzF,MAAL,CAAYmF,KAAZ,CAAkBO,gBAAlB,CAAmCD,cAAnC,EACD,CAAC,MAAOlB,CAAP,CAAU,CAAG,CAChB,C,uCAMQ,iBACP,GAAMnF,MAAOC,wBAAWC,GAAX,CAAe,QAAf,CAAb,CACA,GAAMuG,WAAYC,KAAKC,KAAL,CAAW3G,KAAKS,KAAL,CAAa,CAAb,CAAiB,EAA5B,CAAlB,CAEA,GAAMmG,MACJ,8BAAC,iBAAD,aAAU,KAAK5H,KAAf,EACE,MAAO,CAAC6H,OAAO/F,SAAR,CAAmB,KAAKX,KAAL,CAAWE,cAAX,EAA6BC,uBAAgB2B,KAA7C,CAAqD,CAAEgE,SAAU,UAAZ,CAAwBa,OAAQ,IAAhC,CAAsCC,IAAK,CAA3C,CAA8CC,KAAM,CAApD,CAAuDtG,OAAQ,KAAKP,KAAL,CAAWQ,gBAA1E,CAA4FF,MAAO,KAAKN,KAAL,CAAWK,eAA9G,CAArD,CAAuL,CAAEE,OAAQ+F,SAAV,CAA1M,CADT,CAEE,IACE,uBAAa,CACX,OAAK3F,SAAL,CAAiBmG,SAAjB,CACD,CALL,mDAOE,8BAAC,WAAD,EACE,IACE,uBAAa,CACX,OAAKrG,MAAL,CAAYmF,KAAZ,CAAoBkB,SAApB,CACD,CAJL,CAME,kBAAmB,KANrB,CAOE,UAAW,KAPb,CAQE,WAAYC,KAAKC,KAAL,CAAWC,mBARzB,CASE,MAAOP,OAAOd,KAThB,CAUE,QAAS,KAAKnF,MAAL,CAAYa,QAAZ,CAAqBC,OAVhC,CAWE,mBAAoB,KAAKd,MAAL,CAAYa,QAAZ,CAAqBG,kBAX3C,CAYE,OAAQ,KAAKhB,MAAL,CAAYa,QAAZ,CAAqBS,MAZ/B,CAaE,YAAa,KAAKtB,MAAL,CAAYa,QAAZ,CAAqBW,WAbpC,CAcE,uBAAwB,KAAKxB,MAAL,CAAYa,QAAZ,CAAqBY,sBAd/C,CAeE,kBAAmB,KAAKzB,MAAL,CAAYa,QAAZ,CAAqBkB,iBAf1C,kDAPF,CAwBE,8BAAC,gBAAD,EACE,IACE,uBAAa,CACX,OAAKb,IAAL,CAAYmF,SAAZ,CACD,CAJL,CAME,MAAOJ,OAAO/E,IANhB,CAOE,OAAQ,KAAKlB,MAAL,CAAY5B,KAAZ,CAAkBkE,MAP5B,CAQE,OAAQ,IARV,CASE,eAAgB,KAAK/C,KAAL,CAAWC,cAT7B,CAUE,aAAc,KAAK4C,YAVrB,CAWE,YAAa,KAAKpC,MAAL,CAAY5B,KAX3B,CAYE,WAAY,KAAKiE,UAZnB,kDAxBF,CADF,CA0CA,GAAIlD,MAAO,IAAX,CACAgB,QAAQC,OAAR,CAAgBjB,KAAK+E,IAAL,EAAhB,EAA6BxF,IAA7B,CAAkC,iBAAe6B,GAAf,kJAC5BpB,KAAKa,MAAL,CAAYmF,KADgB,4CAG5B,GAAIhG,KAAKa,MAAL,CAAY5B,KAAZ,EAAqBe,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAvC,EACF,MAAO1B,MAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2B4F,OAAlC,GAA8C,UADhD,CAC4D,CAC1DtH,KAAKa,MAAL,CAAY5B,KAAZ,CAAkByC,QAAlB,CAA2B4F,OAA3B,GACD,CACGC,GAPwB,CAOlB,IAPkB,CAQ5B,GAAIvH,KAAKa,MAAL,CAAY5B,KAAZ,CAAkBkE,MAAlB,GAA6B,KAAjC,CAAwC,CACtCoE,IAAMvH,KAAKwH,kBAAL,EAAN,CACD,CAFD,IAEO,IAAIxH,KAAKa,MAAL,CAAY5B,KAAZ,CAAkBkE,MAAlB,GAA6B,MAAjC,CAAyC,CAC9CoE,IAAMvH,KAAKyH,mBAAL,EAAN,CACD,CAZ2B,KAcxBzH,KAAKa,MAAL,CAAY5B,KAAZ,CAAkBkE,MAAlB,GAA6B,KAdL,iCAevBoE,IAAIG,OAAJ,CAAY,WAAZ,GAA2B,CAAC,CAfL,2BAgBxB1H,KAAK+B,IAAL,CAAU8C,qBAAV,CAAgC,sBAAhC,EAhBwB,8EAmBjB7E,KAAKa,MAAL,CAAY5B,KAAZ,CAAkBkE,MAAlB,GAA6B,MAnBZ,8EAoBGC,cAAIuE,mBAAJ,CAAwB3H,KAAKa,MAAL,CAAY5B,KAAZ,CAAkBqE,GAA1C,CAA+CtD,KAAKa,MAAL,CAAY5B,KAAZ,CAAkBsE,KAAjE,CAAwEvD,KAAKa,MAAL,CAAY5B,KAAZ,CAAkBuE,QAA1F,CApBH,UAoBtBoE,gBApBsB,qBAqBvBA,kBAAoBA,iBAAiBC,WAAjB,GAAiC,OArB9B,4BAsBxB7H,KAAK+B,IAAL,CAAU8C,qBAAV,CAAgC,sCAAhC,EAtBwB,4FA2BtB7E,KAAKa,MAAL,CAAYmF,KAAZ,CAAkB8B,SAAlB,CAA4B,CAAEC,IAAKR,GAAP,CAA5B,CA3BsB,4DA4BtBvH,KAAKa,MAAL,CAAYmF,KAAZ,CAAkBgC,cAAlB,CAAiC,CACrC1B,eAAgB,CADqB,CAErC2B,UAAW,KAF0B,CAGrCC,WAAY,IAHyB,CAAjC,CA5BsB,+FAkC5BlI,KAAK+B,IAAL,CAAUC,WAAV,CAAsB,CAAE3B,eAAgBL,KAAKI,KAAL,CAAWC,cAA7B,CAAtB,EACAL,KAAK+B,IAAL,CAAUoG,IAAV,GACAhJ,cAAOD,KAAP,CAAa,aAAb,CAA4B,aAAE4F,OAA9B,EApC4B,mEAAlC,EAyCA,KAAKsD,SAAL,CAAiBtI,KAAKC,GAAL,EAAjB,CACA,KAAKc,MAAL,CAAYwH,YAAZ,CAA2B,KAAKD,SAAL,CAAiB,KAAKvI,QAAjD,CAEA,MAAOgH,KAAP,CACD,C,+DAEoB,CACnB,GAAI,CACF,GAAIyB,QAAS,kBAAb,CACA,GAAIC,sBAASC,EAAT,GAAgB,KAAhB,EAAyBC,SAASF,sBAASG,OAAlB,CAA2B,EAA3B,GAAkC,EAA/D,CAAmE,CACjEJ,OAAS,eAAT,CACD,CAFD,IAEO,IAAIC,sBAASC,EAAT,GAAgB,SAAhB,EAA6BC,SAASF,sBAASG,OAAlB,CAA2B,EAA3B,GAAkC,EAAnE,CAAuE,CAC5EJ,OAAS,cAAT,CACD,CACD,GAAI,KAAKzH,MAAL,CAAY5B,KAAZ,CAAkB0J,UAAlB,GAAiC,KAArC,CAA4C,CAC1CL,OAAS,kBAAT,CACD,CAED,iBAAkB,KAAKzH,MAAL,CAAYmD,OAAZ,CAAoB,CAApB,CAAlB,KAA4C,KAAKnD,MAAL,CAAY5B,KAAZ,CAAkB4E,KAA9D,YAA8E,KAAKhD,MAAL,CAAY5B,KAAZ,CAAkBuE,QAAhG,aAAoH8E,MAApH,CACD,CAAC,MAAMlD,CAAN,CAAS,CACTpF,KAAK+B,IAAL,CAAUC,WAAV,CAAsB,CAAE3B,eAAgBL,KAAKI,KAAL,CAAWC,cAA7B,CAAtB,EACAL,KAAK+B,IAAL,CAAUoG,IAAV,GACAhJ,cAAOD,KAAP,CAAa,SAAb,CAAwBkG,EAAEN,OAA1B,EACA,MAAO,KAAP,CACD,CACF,C,iEAEqB,CACpB,GAAI,CACF,GAAIwD,QAAS,kBAAb,CACA,GAAIC,sBAASC,EAAT,GAAgB,KAAhB,EAAyBC,SAASF,sBAASG,OAAlB,CAA2B,EAA3B,GAAkC,EAA/D,CAAmE,CACjEJ,OAAS,eAAT,CACD,CAFD,IAEO,IAAIC,sBAASC,EAAT,GAAgB,SAAhB,EAA6BC,SAASF,sBAASG,OAAlB,CAA2B,EAA3B,GAAkC,EAAnE,CAAuE,CAC5EJ,OAAS,cAAT,CACD,CACD,GAAI,KAAKzH,MAAL,CAAY5B,KAAZ,CAAkB0J,UAAlB,GAAiC,KAArC,CAA4C,CAC1CL,OAAS,kBAAT,CACD,CAED,iBAAkB,KAAKzH,MAAL,CAAYmD,OAAZ,CAAoB,CAApB,CAAlB,KAA4C,KAAKnD,MAAL,CAAY5B,KAAZ,CAAkB4E,KAA9D,UAA4E,KAAKhD,MAAL,CAAY5B,KAAZ,CAAkBmF,UAA9F,KAA4GkE,MAA5G,CACD,CAAC,MAAMlD,CAAN,CAAS,CACTpF,KAAK+B,IAAL,CAAUC,WAAV,CAAsB,CAAE3B,eAAgBL,KAAKI,KAAL,CAAWC,cAA7B,CAAtB,EACAL,KAAK+B,IAAL,CAAUoG,IAAV,GACAhJ,cAAOD,KAAP,CAAa,SAAb,CAAwBkG,EAAEN,OAA1B,EACA,MAAO,KAAP,CACD,CACF,C,yCArQmB,CAClB,MAAO,MAAKjE,MAAL,CAAYW,aAAnB,CACD,C,mCA1DkB,CACjB,MAAOoH,gBAAP,CACD,C,sBAlHmCC,gBAAMC,S,oEA+axCC,a,CAAgB,UAAM,CAClB,GAAI,OAAKlI,MAAL,CAAYmF,KAAZ,EAAqB,IAAzB,CAA+B,CAC3B,OAAKnF,MAAL,CAAYmF,KAAZ,CAAkBgD,eAAlB,CAAkC,CAAC,OAAK5I,KAAL,CAAWC,cAAX,CAA0B4I,OAA7D,EACH,CACJ,C,MAEHrJ,wB,CAA2B,SAACJ,cAAD,CAAoB,CAC7C,GAAIQ,MAAO,MAAX,CACAb,cAAOD,KAAP,CAAa,yBAA2BM,eAAeC,IAA1C,CAAiD,mBAAjD,CAAuED,eAAeE,aAAnG,EACA,GAAGM,KAAKgD,cAAR,CAAuB,CACrBhD,KAAKgD,cAAL,CAAsB,KAAtB,CACD,CAFD,IAEM,IAAGxD,eAAeC,IAAf,GAAwB,MAAxB,EAAkCO,KAAKa,MAAL,CAAY5B,KAAZ,CAAkBkE,MAAlB,GAA6B,MAA/D,EAAyEnD,KAAK+C,iBAAL,GAA2B,IAAvG,CAA4G,CAChH/C,KAAK+C,iBAAL,CAAyB,KAAzB,CACD,CAFK,IAEA,IAAGvD,eAAeC,IAAf,GAAwB,MAAxB,EAAkCO,KAAKa,MAAL,CAAY5B,KAAZ,CAAkBkE,MAAlB,GAA6B,MAA/D,EAAyEnD,KAAK+C,iBAAL,GAA2B,KAAvG,CAA6G,CACjH/C,KAAK+C,iBAAL,CAAyB,IAAzB,CACA/C,KAAKkJ,sBAAL,GACD,CACF,C,MACDA,sB,CAAyB,4IACpB,OAAKnG,iBADe,2EAEf,OAAKlC,MAAL,CAAYmF,KAAZ,CAAkBgC,cAAlB,CAAiC,CACrC1B,eAAgB,CADqB,CAErC2B,UAAW,KAF0B,CAGrCC,WAAY,IAHyB,CAAjC,CAFe,6D,0BAjcNlJ,Q,CA4crB,GAAM8H,QAASqC,wBAAWC,MAAX,CAAkB,CAC/BrI,UAAW,CACTsI,gBAAiB,OADR,CAET3I,MAAO,MAFE,CADoB,CAK/BsF,MAAO,CACLE,SAAU,UADL,CAELa,OAAQ,CAFH,CAGLC,IAAK,CAHA,CAILC,KAAM,CAJD,CAMLvG,MAAO,MANF,CAOLC,OAAQ,MAPH,CALwB,CAc/BoB,KAAM,CACJmE,SAAU,UADN,CAEJa,OAAQ,KAFJ,CAGJC,IAAK,CAHD,CAIJC,KAAM,CAJF,CAMJvG,MAAO,MANH,CAOJC,OAAQ,MAPJ,CAdyB,CAAlB,CAAf","file":"UZPlayer.js","sourcesContent":["import React from 'react';\nimport { Animated, Dimensions, Platform, StatusBar, StyleSheet, TouchableWithoutFeedback, View } from 'react-native';\nimport { Constants, ScreenOrientation, Video } from 'expo';\nimport Utils, { Logger } from './utils/Utils';\n\nimport API from './API';\nimport SkinUiza from './skins/uiza/Layout';\nimport PluginManager from './plugins/PluginManager';\nimport PlayerEvent from './Event';\nimport { ControlState, FullscreenState } from './skins/State';\nimport {NetInfo} from 'react-native';\n\nexport default class UZPlayer extends React.Component {\n  constructor(props) {\n    if (!!props.debug) {\n      Logger.enableDebug = true;\n    }\n    super(props);\n\n\n    NetInfo.getConnectionInfo().then((connectionInfo) => {\n        Logger.debug('Initial, type: ' + connectionInfo.type + ', effectiveType: '    + connectionInfo.effectiveType);\n    });\n    NetInfo.addEventListener(\n        'connectionChange',\n        this.handleConnectivityChange\n    );\n    this.initTime = Date.now();\n\n    let self = this;\n\n    const size = Dimensions.get('screen');\n\n    this.state = {\n      playbackStatus: {},\n      fullsceenState: FullscreenState.EXIT,\n      fullscreenWidth: size.width > size.height ? size.width : size.height,\n      fullscreenHeight: size.height < size.width ? size.height : size.width,\n    };\n\n    this.player = {\n      VERSION: '1.0.0'\n    };\n    this.container = {};\n\n    Promise.resolve(Constants.getWebViewUserAgentAsync()).then(function(res) {\n      self.player.userAgent = res;\n    });\n    this.player.deviceId = Constants.deviceId;\n    this.player.sessionId = Constants.sessionId;\n    this.player.didJustFinish = false;\n    this.player.inited = false;\n    this.player.props = props;\n\n    this.player.listener = {\n      onError: function(evt) {\n        Logger.debug('onError');\n        if (self.player.props && self.player.props.listener && typeof self.player.props.listener.onError === 'function') {\n          self.player.props.listener.onError(evt);\n        }\n      },\n      onFullscreenUpdate: function(evt) {\n        Logger.debug('onFullscreenUpdate');\n        // switch (evt.fullscreenUpdate) {\n        //   case PlayerEvent.FULLSCREEN_WILL_ENTER:\n        //     self.state.fullsceenState = FullscreenState.ENTERING;\n        //     break;\n        //   case PlayerEvent.FULLSCREEN_DID_ENTER:\n        //     self.state.fullsceenState = FullscreenState.ENTER;\n        //     break;\n        //   case PlayerEvent.FULLSCREEN_WILL_EXIT:\n        //     self.state.fullsceenState = FullscreenState.EXITING;\n        //     break;\n        //   case PlayerEvent.FULLSCREEN_DID_EXIT:\n        //     self.state.fullsceenState = FullscreenState.EXIT;\n        //     break;\n        // }\n        if (self.player.props && self.player.props.listener && typeof self.player.props.listener.onFullscreenChange === 'function') {\n          self.player.props.listener.onFullscreenChange(evt);\n        }\n\n        self.skin.updateState({ fullscreen: evt === FullscreenState.ENTER });\n      },\n      onLoad: function(evt) {\n        Logger.debug('onLoad');\n        // self.player.video.setPositionAsync(60000);\n        if (self.player.props && self.player.props.listener && typeof self.player.props.listener.onLoaded === 'function') {\n          self.player.props.listener.onLoaded(evt);\n        }\n      },\n      onLoadStart: function(evt) {\n        Logger.debug('onLoadStart');\n        // self.player.video.initialStatus({ positionMillis: 60000 });\n        if (self.player.props && self.player.props.listener && typeof self.player.props.listener.onLoad === 'function') {\n          self.player.props.listener.onLoad(evt);\n        }\n      },\n      onPlaybackStatusUpdate: function(evt) {\n        Logger.debug('onPlaybackStatusUpdate');\n        self.state.playbackStatus = evt;\n        if (self.state.playbackStatus.didJustFinish) {\n          self.player.didJustFinish = true;\n          self.skin.show();\n        } else if (self.state.playbackStatus.isPlaying) {\n          self.player.didJustFinish = false;\n        }\n        if (self.player.props && self.player.props.listener && typeof self.player.props.listener.onPlaybackChange === 'function') {\n          self.player.props.listener.onPlaybackChange(evt);\n        }\n        self.skin.updateState({ playbackStatus: self.state.playbackStatus });\n        self.pluginManager.updatePlaybackStatus(self.state.playbackStatus);\n      },\n      onReadyForDisplay: function(evt) {\n        Logger.debug('onReadyForDisplay');\n      }\n    };\n\n    this.pluginManager = new PluginManager(this.player.props);\n\n    this.errorMessage = null;\n    this.lastNetworkStatus = true;\n    this.isFirstConnect = true;\n  }\n\n  static get Event() {\n    return PlayerEvent;\n  }\n\n  async init() {\n    this.entityDetail = null;\n    this.liveDetail = null;\n    if (this.player.props.stream === 'vod') {\n      this.entityDetail = await API.getEntityDetail(this.player.props.api, this.player.props.token, this.player.props.entityId);\n    }else if (this.player.props.stream === 'live') {\n        this.entityDetail = await API.getLiveDetail(this.player.props.api, this.player.props.token, this.player.props.entityId,this.player.props.feedId, null);\n      this.liveDetail = await API.getLiveView(this.player.props.api, this.player.props.token, this.player.props.entityId, null);\n    }\n\n    this.player.playbackToken = await API.getPlaybackToken(this.player.props.api, this.player.props.appId, this.player.props.entityId);\n\n    this.player.cdnListFull = [];\n    this.player.cdnList = [];\n\n    let res = null;\n    if (this.player.props.stream === 'vod') {\n      res = await API.getCDNVod(this.player.props.env, this.player.playbackToken,\n        this.player.props.appId, this.player.props.entityId);\n    } else if (this.player.props.stream === 'live') {\n      res = await API.getCDNLive(this.player.props.env, this.player.playbackToken,\n        this.player.props.appId, this.player.props.entityId,\n        this.player.props.streamName, this.player.props.region);\n    }\n\n    if (res && res.data && res.data.cdn) {\n      this.player.cdnListFull = res.data.cdn\n      this.player.cdnList = []\n      await Promise\n        .all(res.data.cdn)\n        .then(cdns => {\n          return cdns.map(cdn => {\n            this.player.cdnList.push(cdn.host);\n          });\n        });\n    }\n    else {\n      Logger.debug('init() res', res);\n      this.skin.updateLiveStatusProps(res.message);\n      return;\n    }\n    this.pluginManager.init(this.player, {\n      cdnList: this.player.cdnList,\n      entityDetail: this.entityDetail\n    });\n    this.skin.updateEntityProps({ entityDetail: this.entityDetail });\n\n    this.player.inited = true;\n\n    return this.player.inited;\n  }\n\n  get didJustFinish() {\n    return this.player.didJustFinish;\n  }\n\n  toggleFullscreen() {\n    Logger.debug('toggleFullscreen: ', this.state.fullsceenState);\n    try {\n      if (this.state.fullsceenState === FullscreenState.ENTER || this.state.fullsceenState === FullscreenState.ENTERING) {\n        this.exitFullscreen();\n        this.player.listener.onFullscreenUpdate(FullscreenState.EXIT);\n      } else {\n        this.enterFullscreen();\n        this.player.listener.onFullscreenUpdate(FullscreenState.ENTER);\n      }\n    } catch(e) {}\n  }\n\n  enterFullscreen() {\n    try {\n      // this.player.video.presentFullscreenPlayer();\n      this.state.fullsceenState = FullscreenState.ENTERING;\n      StatusBar.setHidden(true);\n      this.state.fullsceenState = FullscreenState.ENTER;\n\n      this.setState(previousState => {\n        return { fullsceenState: FullscreenState.ENTER };\n      });\n      ScreenOrientation.allow(ScreenOrientation.Orientation.LANDSCAPE);\n    } catch(e) {}\n  }\n\n  exitFullscreen() {\n    try {\n      // this.player.video.dismissFullscreenPlayer();\n      this.state.fullsceenState = FullscreenState.EXITING;\n      StatusBar.setHidden(false);\n      this.state.fullsceenState = FullscreenState.EXIT;\n\n      this.setState(previousState => {\n        return { fullsceenState: FullscreenState.EXIT };\n      });\n      ScreenOrientation.allow(ScreenOrientation.Orientation.ALL);\n    } catch(e) {}\n  }\n\n  togglePlayPause() {\n    try {\n      if (this.state.playbackStatus.isPlaying) {\n        this.pause();\n      } else {\n        this.play();\n      }\n    } catch(e) {}\n  }\n\n  pause() {\n    try {\n      Logger.debug('pause this.player.didJustFinish',this.player.didJustFinish);\n      this.player.video.pauseAsync();\n      this.skin.show();\n    } catch (e) { }\n  }\n\n  /* position in second */\n  play(position) {\n    try {\n      Logger.debug('async play this.player.didJustFinish',this.player.didJustFinish);\n\n      if (this.player.didJustFinish) {\n        this.player.didJustFinish = false;\n        this.pluginManager.emit('replay');\n      }\n      if (typeof position === 'undefined') {\n        this.player.video.playAsync();\n      } else {\n        this.player.video.playFromPositionAsync(position * 1000);\n      }\n      this.skin.show();\n      Logger.debug('async play this.player.didJustFinish finish');\n    } catch (e) { }\n  }\n\n  /* position in second */\n  backward(position) {\n    try {\n      if (this.state.playbackStatus) {\n        let positionMillis = position * 1000;\n        positionMillis = this.state.playbackStatus.positionMillis - positionMillis;\n        if (positionMillis < 0) {\n          positionMillis = 0;\n        }\n        this.player.video.setPositionAsync(positionMillis);\n      }\n    } catch (e) { }\n  }\n\n  /* position in second */\n  forward(position) {\n    try {\n      if (this.state.playbackStatus) {\n        let positionMillis = position * 1000;\n        positionMillis = this.state.playbackStatus.positionMillis + positionMillis;\n        if (positionMillis > this.state.playbackStatus.durationMillis - 1e4) {\n          positionMillis = this.state.playbackStatus.durationMillis - 1e4;\n        }\n        this.player.video.setPositionAsync(positionMillis);\n      }\n    } catch (e) { }\n  }\n\n  seek(position, forceSeek = false) {\n    try {\n      let positionMillis = position * 1000;\n      if (!forceSeek && positionMillis > this.state.playbackStatus.durationMillis - 2000) {\n        positionMillis = this.state.playbackStatus.durationMillis - 2000;\n      }\n      if (positionMillis < 0) {\n        positionMillis = 0;\n      }\n      this.player.video.setPositionAsync(positionMillis);\n    } catch (e) { }\n  }\n\n  // shouldComponentUpdate(nextProps, nextState) {\n  //   return false;\n  // }\n\n  render() {\n    const size = Dimensions.get('screen');\n    const height169 = Math.floor(size.width * 9 / 16);\n\n    const view = (\n      <View {...this.props}\n        style={[styles.container, this.state.fullsceenState == FullscreenState.ENTER ? { position: 'absolute', zIndex: 9999, top: 0, left: 0, height: this.state.fullscreenHeight, width: this.state.fullscreenWidth } : { height: height169 }]}\n        ref={\n          component => {\n            this.container = component;\n          }\n        }>\n        <Video\n          ref={\n            component => {\n              this.player.video = component;\n            }\n          }\n          useNativeControls={false}\n          isLooping={false}\n          resizeMode={Expo.Video.RESIZE_MODE_CONTAIN}\n          style={styles.video}\n          onError={this.player.listener.onError}\n          onFullscreenUpdate={this.player.listener.onFullscreenUpdate}\n          onLoad={this.player.listener.onLoad}\n          onLoadStart={this.player.listener.onLoadStart}\n          onPlaybackStatusUpdate={this.player.listener.onPlaybackStatusUpdate}\n          onReadyForDisplay={this.player.listener.onReadyForDisplay}\n        />\n        <SkinUiza\n          ref={\n            component => {\n              this.skin = component;\n            }\n          }\n          style={styles.skin}\n          stream={this.player.props.stream}\n          player={this}\n          playbackStatus={this.state.playbackStatus}\n          entityDetail={this.entityDetail}\n          playerProps={this.player.props}\n          liveDetail={this.liveDetail}\n        />\n      </View>\n    );\n\n    let self = this;\n    Promise.resolve(self.init()).then(async function(res) {\n      if (self.player.video) {\n        try {\n          if (self.player.props && self.player.props.listener &&\n            typeof self.player.props.listener.onReady === 'function') {\n            self.player.props.listener.onReady();\n          }\n          let url = null;\n          if (self.player.props.stream === 'vod') {\n            url = self.definedLinkPlayVod();\n          } else if (self.player.props.stream === 'live') {\n            url = self.definedLinkPlayLive();\n          }\n\n          if (self.player.props.stream === 'vod') {\n            if(url.indexOf('undefined')!= -1) {\n              self.skin.updateLiveStatusProps('Content not found!!!');\n              return;\n            }\n          } else if (self.player.props.stream === 'live') {\n            let liveStatusDetail = await API.getLiveStatusDetail(self.player.props.api, self.player.props.token, self.player.props.entityId);\n            if(liveStatusDetail && liveStatusDetail.lastProcess !== 'start'){\n              self.skin.updateLiveStatusProps('This content is not streaming now!!!');\n              return;\n            }\n          }\n\n          await self.player.video.loadAsync({ uri: url });\n          await self.player.video.setStatusAsync({\n            positionMillis: 0, // for resume\n            isLooping: false,\n            shouldPlay: true\n          });\n        } catch (e) {\n          self.skin.updateState({ playbackStatus: self.state.playbackStatus });\n          self.skin.hide();\n          Logger.debug('error 377: ', e.message);\n        }\n      }\n    });\n\n    this.readyTime = Date.now();\n    this.player.pageLoadTime = this.readyTime - this.initTime;\n\n    return view;\n  }\n\n  definedLinkPlayVod() {\n    try {\n      let prefix = 'playlist_ts.m3u8';\n      if (Platform.OS === 'ios' && parseInt(Platform.Version, 10) >= 10) { // iOS >= 10\n        prefix = 'playlist.m3u8'; // hls\n      } else if (Platform.OS === 'android' && parseInt(Platform.Version, 10) >= 16) { // android API 16 ~ android 4.1\n        prefix = 'manifest.mpd'; // dash\n      }\n      if (this.player.props.playerName === 'vod') {\n        prefix = 'playlist_ts.m3u8';\n      }\n\n      return `https://${this.player.cdnList[0]}/${this.player.props.appId}-stream/${this.player.props.entityId}/package/${prefix}`\n    } catch(e) {\n      self.skin.updateState({ playbackStatus: self.state.playbackStatus });\n      self.skin.hide();\n      Logger.debug('error: ', e.message);\n      return null;\n    }\n  }\n\n  definedLinkPlayLive() {\n    try {\n      let prefix = 'playlist_ts.m3u8';\n      if (Platform.OS === 'ios' && parseInt(Platform.Version, 10) >= 10) { // iOS >= 10\n        prefix = 'playlist.m3u8'; // hls\n      } else if (Platform.OS === 'android' && parseInt(Platform.Version, 10) >= 16) { // android API 16 ~ android 4.1\n        prefix = 'manifest.mpd'; // dash\n      }\n      if (this.player.props.playerName === 'vod') {\n        prefix = 'playlist_ts.m3u8';\n      }\n\n      return `https://${this.player.cdnList[0]}/${this.player.props.appId}-live/${this.player.props.streamName}/${prefix}`\n    } catch(e) {\n      self.skin.updateState({ playbackStatus: self.state.playbackStatus });\n      self.skin.hide();\n      Logger.debug('error: ', e.message);\n      return null;\n    }\n  }\n\n    onMutePressed = () => {\n        if (this.player.video != null) {\n            this.player.video.setIsMutedAsync(!this.state.playbackStatus.isMuted);\n        }\n    };\n\n  handleConnectivityChange = (connectionInfo) => {\n    let self = this;\n    Logger.debug('Network change, type: ' + connectionInfo.type + ', effectiveType: ' + connectionInfo.effectiveType);\n    if(self.isFirstConnect){\n      self.isFirstConnect = false;\n    }else if(connectionInfo.type === 'none' && self.player.props.stream === 'live' && self.lastNetworkStatus === true){\n      self.lastNetworkStatus = false;\n    }else if(connectionInfo.type !== 'none' && self.player.props.stream === 'live' && self.lastNetworkStatus === false){\n      self.lastNetworkStatus = true;\n      self.retrieveLiveConnection();\n    }\n  }\n  retrieveLiveConnection = async () => {\n    if(this.lastNetworkStatus){\n      await this.player.video.setStatusAsync({\n        positionMillis: 0, // for resume\n        isLooping: false,\n        shouldPlay: true\n      });\n    }\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: 'black',\n    width: '100%',\n  },\n  video: {\n    position: 'absolute',\n    zIndex: 0,\n    top: 0,\n    left: 0,\n\n    width: '100%',\n    height: '100%',\n  },\n  skin: {\n    position: 'absolute',\n    zIndex: 99999,\n    top: 0,\n    left: 0,\n\n    width: '100%',\n    height: '100%',\n  }\n});\n"]}